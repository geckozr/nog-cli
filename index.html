<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Nog CLI Developer Guide - v0.9.1</title><meta name="description" content="Documentation for Nog CLI Developer Guide"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">Nog CLI Developer Guide - v0.9.1</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Nog CLI Developer Guide - v0.9.1</h1></div><div class="tsd-panel tsd-typography"><h1 id="nog-cli-architecture-and-design-guide" class="tsd-anchor-link">Nog-CLI Architecture and Design Guide<a href="#nog-cli-architecture-and-design-guide" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h2 id="table-of-contents" class="tsd-anchor-link">Table of Contents<a href="#table-of-contents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li><a href="#high-level-architecture">High-Level Architecture</a></li>
<li><a href="#data-flow-pipeline">Data Flow Pipeline</a></li>
<li><a href="#core-concepts">Core Concepts</a></li>
<li><a href="#design-decisions">Design Decisions</a></li>
<li><a href="#directory-structure">Directory Structure</a></li>
<li><a href="#development-patterns">Development Patterns</a></li>
</ol>
<h2 id="high-level-architecture" class="tsd-anchor-link">High-Level Architecture<a href="#high-level-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>nog-cli</code> is implemented as a unidirectional three-stage compiler:</p>
<pre><code><span class="hl-0">OpenAPI</span><span class="hl-1"> </span><span class="hl-2">Spec</span><span class="hl-1"> (</span><span class="hl-0">Input</span><span class="hl-1">)</span><br/><span class="hl-1">        ↓</span><br/><span class="hl-1">    [</span><span class="hl-0">Parser</span><span class="hl-1">]         - </span><span class="hl-0">Load</span><span class="hl-1">, </span><span class="hl-0">validate</span><span class="hl-1">, </span><span class="hl-0">and</span><span class="hl-1"> </span><span class="hl-0">dereference</span><br/><span class="hl-1">        ↓</span><br/><span class="hl-1"> </span><span class="hl-0">Internal</span><span class="hl-1"> </span><span class="hl-2">Representation</span><span class="hl-1"> (</span><span class="hl-3">IR</span><span class="hl-1">) - </span><span class="hl-0">Normalize</span><span class="hl-1"> </span><span class="hl-0">to</span><span class="hl-1"> </span><span class="hl-0">framework</span><span class="hl-1">-</span><span class="hl-0">agnostic</span><span class="hl-1"> </span><span class="hl-0">structure</span><br/><span class="hl-1">        ↓</span><br/><span class="hl-1">   [</span><span class="hl-0">Generator</span><span class="hl-1">]       - </span><span class="hl-0">Emit</span><span class="hl-1"> </span><span class="hl-0">TypeScript</span><span class="hl-1"> </span><span class="hl-0">code</span><span class="hl-1"> </span><span class="hl-0">via</span><span class="hl-1"> </span><span class="hl-0">ts</span><span class="hl-1">-</span><span class="hl-0">morph</span><span class="hl-1"> </span><span class="hl-3">AST</span><br/><span class="hl-1">        ↓</span><br/><span class="hl-0">Generated</span><span class="hl-1"> </span><span class="hl-0">NestJS</span><span class="hl-1"> </span><span class="hl-2">Module</span><span class="hl-1"> (</span><span class="hl-0">Output</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>

<p>This architecture provides several benefits:</p>
<ul>
<li><strong>Separation of Concerns</strong>: Parser, normalization, and generation are decoupled.</li>
<li><strong>Testability</strong>: Each stage can be tested independently.</li>
<li><strong>Extensibility</strong>: New output formats can be added by implementing new generators without modifying the parser or IR.</li>
<li><strong>Framework Agnosticism</strong>: The IR is not tied to NestJS, allowing future support for other frameworks.</li>
</ul>
<h2 id="data-flow-pipeline" class="tsd-anchor-link">Data Flow Pipeline<a href="#data-flow-pipeline" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="stage-1-parser" class="tsd-anchor-link">Stage 1: Parser<a href="#stage-1-parser" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Location:</strong> <code>src/core/parser/</code></p>
<p>The parser ingests OpenAPI specifications (JSON or YAML) and resolves external references using <code>@apidevtools/json-schema-ref-parser</code>.</p>
<p>Key responsibilities:</p>
<ul>
<li>Load OpenAPI files from filesystem or HTTP URLs.</li>
<li>Validate OpenAPI version (3.0.x or 3.1.x).</li>
<li>Bundle external references (<code>$ref</code>) while preserving schema identity.</li>
<li>Return a validated <code>OpenApiDocument</code> object.</li>
</ul>
<p><strong>Key File:</strong> <code>src/core/parser/openapi.parser.ts</code></p>
<h3 id="stage-2-internal-representation-ir" class="tsd-anchor-link">Stage 2: Internal Representation (IR)<a href="#stage-2-internal-representation-ir" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Location:</strong> <code>src/core/ir/</code></p>
<p>The IR is a simplified, normalized representation of an API specification that abstracts away OpenAPI-specific details.</p>
<h4 id="ir-structures" class="tsd-anchor-link">IR Structures<a href="#ir-structures" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><strong>IrDefinition</strong>: Root container with metadata, models, and services.</li>
<li><strong>IrModel</strong>: Represents a schema (DTO or Enum).</li>
<li><strong>IrService</strong>: Represents a logical grouping of operations.</li>
<li><strong>IrOperation</strong>: Represents a single HTTP operation (GET, POST, etc.).</li>
<li><strong>IrType</strong>: Represents a TypeScript type (primitives, arrays, unions, references).</li>
<li><strong>IrValidator</strong>: Represents a validation rule (<code>IS_EMAIL</code>, <code>MIN_LENGTH</code>, etc.).</li>
</ul>
<h4 id="two-pass-conversion-algorithm" class="tsd-anchor-link">Two-Pass Conversion Algorithm<a href="#two-pass-conversion-algorithm" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>OpenApiConverter</code> resolves circular dependencies using a two-pass approach:</p>
<p><strong>Pass 1 (Discovery):</strong> Iterate through all schemas and create empty model shells in the registry.</p>
<ul>
<li>Result: <code>UserDto</code> and <code>PostDto</code> exist in memory but have no properties yet.</li>
</ul>
<p><strong>Pass 2 (Population):</strong> Iterate again and populate properties. Forward references are resolved from the registry.</p>
<ul>
<li>Result: <code>UserDto.posts: PostDto[]</code> successfully references the already-created <code>PostDto</code>.</li>
</ul>
<p><strong>Key File:</strong> <code>src/core/ir/openapi.converter.ts</code></p>
<h3 id="stage-3-generator" class="tsd-anchor-link">Stage 3: Generator<a href="#stage-3-generator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Location:</strong> <code>src/core/generator/</code></p>
<p>The generator consumes the IR and emits TypeScript code using the <code>ts-morph</code> library (Abstract Syntax Tree manipulation).</p>
<h4 id="writer-classes" class="tsd-anchor-link">Writer Classes<a href="#writer-classes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><strong>DtoWriter</strong>: Emits DTO classes and Enums.</li>
<li><strong>ServiceWriter</strong>: Emits NestJS Service classes.</li>
<li><strong>ModuleWriter</strong>: Emits the primary NestJS Module that wires services.</li>
<li><strong>IndexWriter</strong>: Emits barrel export files (<code>index.ts</code>).</li>
</ul>
<p><strong>Key File:</strong> <code>src/core/generator/engine.ts</code></p>
<h2 id="core-concepts" class="tsd-anchor-link">Core Concepts<a href="#core-concepts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="pure-oneof-vs-hybrid-oneof" class="tsd-anchor-link">Pure OneOf vs. Hybrid OneOf<a href="#pure-oneof-vs-hybrid-oneof" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The generator distinguishes between two types of union schemas:</p>
<h4 id="pure-oneof-type-alias" class="tsd-anchor-link">Pure OneOf (Type Alias)<a href="#pure-oneof-type-alias" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>A schema is &quot;pure OneOf&quot; when:</p>
<ul>
<li>It declares a discriminator and subTypes.</li>
<li>It has no own properties.</li>
<li>It has no base class.</li>
</ul>
<p><strong>Rendering:</strong> Type alias</p>
<pre><code class="typescript"><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-6">MediaUnion</span><span class="hl-1"> = </span><span class="hl-6">ImageDto</span><span class="hl-1"> | </span><span class="hl-6">VideoDto</span><span class="hl-1"> | </span><span class="hl-6">AudioDto</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h4 id="hybrid-oneof-class" class="tsd-anchor-link">Hybrid OneOf (Class)<a href="#hybrid-oneof-class" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>A schema is &quot;hybrid&quot; when:</p>
<ul>
<li>It has its own properties AND a discriminator (mixed composition).</li>
<li>It has a base class but also defines subTypes.</li>
</ul>
<p><strong>Rendering:</strong> Class with properties and optional inheritance</p>
<pre><code class="typescript"><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-6">BaseContent</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-2">IsNotEmpty</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  @</span><span class="hl-2">IsString</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-0">kind</span><span class="hl-1">: </span><span class="hl-7">&#39;text&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;image&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;video&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="dual-service-methods" class="tsd-anchor-link">Dual Service Methods<a href="#dual-service-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each NestJS service operation generates two method variants:</p>
<h4 id="observable-method-suffix-" class="tsd-anchor-link">Observable Method (Suffix <code>$</code>)<a href="#observable-method-suffix-" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Returns <code>Observable&lt;T&gt;</code> from RxJS:</p>
<pre><code class="typescript"><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getUserById$</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-0">string</span><span class="hl-1">): </span><span class="hl-0">Observable</span><span class="hl-1">&lt;</span><span class="hl-0">UserDto</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  const </span><span class="hl-0">url</span><span class="hl-1"> = </span><span class="hl-7">`/users/</span><span class="hl-5">${</span><span class="hl-0">id</span><span class="hl-5">}</span><span class="hl-7">`</span><span class="hl-1">;</span><br/><span class="hl-1">  return this.httpService.get&lt;UserDto&gt;(url).pipe(</span><br/><span class="hl-1">    </span><span class="hl-2">map</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1"> =&gt; </span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">data</span><span class="hl-1">),</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Advantage: Reactive programming, powerful operators (map, filter, switchMap, etc.).</p>
<h4 id="promise-method" class="tsd-anchor-link">Promise Method<a href="#promise-method" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Wraps the Observable variant using <code>firstValueFrom()</code>, returns <code>Promise&lt;T&gt;</code>:</p>
<pre><code class="typescript"><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-2">getUserById</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-0">string</span><span class="hl-1">): </span><span class="hl-6">Promise</span><span class="hl-1">&lt;</span><span class="hl-0">UserDto</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  return </span><span class="hl-2">firstValueFrom</span><span class="hl-1">(this.getUserById$(</span><span class="hl-0">id</span><span class="hl-1">));</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Advantage: Familiar async/await syntax, easier for imperative code.</p>
<p><strong>Strategy:</strong> Developers choose which variant fits their use case. Both share underlying HTTP logic.</p>
<h3 id="validation-decorators" class="tsd-anchor-link">Validation Decorators<a href="#validation-decorators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Generated DTOs use <code>class-validator</code> decorators for runtime validation:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-0">IsEmail</span><span class="hl-1">, </span><span class="hl-0">IsNotEmpty</span><span class="hl-1">, </span><span class="hl-0">Min</span><span class="hl-1">, </span><span class="hl-0">Max</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-7">&#39;class-validator&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-6">UserDto</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-2">IsEmail</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-0">email</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  @</span><span class="hl-2">IsNotEmpty</span><span class="hl-1">()</span><br/><span class="hl-1">  @</span><span class="hl-2">Min</span><span class="hl-1">(</span><span class="hl-8">18</span><span class="hl-1">)</span><br/><span class="hl-1">  @</span><span class="hl-2">Max</span><span class="hl-1">(</span><span class="hl-8">120</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-0">age</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Validation rules are automatically extracted from OpenAPI schema constraints:</p>
<ul>
<li><code>required</code> → <code>@IsNotEmpty()</code></li>
<li><code>format: email</code> → <code>@IsEmail()</code></li>
<li><code>minimum</code>, <code>maximum</code> → <code>@Min()</code>, <code>@Max()</code></li>
<li><code>pattern</code> → <code>@Matches()</code></li>
<li><code>enum</code> → <code>@IsIn()</code></li>
</ul>
<h2 id="design-decisions" class="tsd-anchor-link">Design Decisions<a href="#design-decisions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="why-ts-morph-for-code-generation" class="tsd-anchor-link">Why ts-morph for Code Generation?<a href="#why-ts-morph-for-code-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>We use <code>ts-morph</code> (AST manipulation) instead of string templates because:</p>
<ul>
<li><strong>Correctness:</strong> Impossible to emit syntactically invalid code.</li>
<li><strong>Formatting:</strong> Automatic indentation, semicolons, and line breaks.</li>
<li><strong>Maintenance:</strong> Changes to code structure are declarative, not brittle.</li>
<li><strong>Testing:</strong> Emitted code can be validated by loading into a <code>Project</code> and inspecting the AST.</li>
</ul>
<h3 id="why-two-pass-circular-dependency-resolution" class="tsd-anchor-link">Why Two-Pass Circular Dependency Resolution?<a href="#why-two-pass-circular-dependency-resolution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Instead of using dereferencing (inlining all schemas), we use the two-pass algorithm because:</p>
<ul>
<li><strong>Schema Identity:</strong> Named models remain named, not flattened into inline types.</li>
<li><strong>Maintainability:</strong> Generated code references <code>UserDto</code>, not an expanded object literal.</li>
<li><strong>Performance:</strong> Large circular graphs are handled gracefully.</li>
</ul>
<h3 id="why-separate-parser-ir-and-generator" class="tsd-anchor-link">Why Separate Parser, IR, and Generator?<a href="#why-separate-parser-ir-and-generator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>This separation enables:</p>
<ul>
<li><strong>Testability:</strong> Each layer can be tested independently.</li>
<li><strong>Extensibility:</strong> Future support for GraphQL, gRPC, or other targets.</li>
<li><strong>Clarity:</strong> Business logic (normalization) is isolated from I/O and code emission.</li>
</ul>
<h2 id="directory-structure" class="tsd-anchor-link">Directory Structure<a href="#directory-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-0">src</span><span class="hl-1">/</span><br/><span class="hl-1">├── </span><span class="hl-0">cli</span><span class="hl-1">/                          # </span><span class="hl-0">User</span><span class="hl-1"> </span><span class="hl-0">Interface</span><span class="hl-1"> </span><span class="hl-2">Layer</span><span class="hl-1"> (</span><span class="hl-0">Commander</span><span class="hl-1">.</span><span class="hl-0">js</span><span class="hl-1">)</span><br/><span class="hl-1">│   ├── </span><span class="hl-0">commands</span><span class="hl-1">/</span><br/><span class="hl-1">│   │   └── </span><span class="hl-0">generate</span><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">.</span><span class="hl-0">ts</span><span class="hl-1">   # </span><span class="hl-0">Generate</span><span class="hl-1"> </span><span class="hl-0">command</span><span class="hl-1"> </span><span class="hl-0">logic</span><br/><span class="hl-1">│   ├── </span><span class="hl-0">types</span><span class="hl-1">.</span><span class="hl-0">ts</span><span class="hl-1">                  # </span><span class="hl-3">CLI</span><span class="hl-1"> </span><span class="hl-0">configuration</span><span class="hl-1"> </span><span class="hl-0">interfaces</span><br/><span class="hl-1">│   └── </span><span class="hl-0">program</span><span class="hl-1">.</span><span class="hl-0">ts</span><span class="hl-1">                # </span><span class="hl-3">CLI</span><span class="hl-1"> </span><span class="hl-0">program</span><span class="hl-1"> </span><span class="hl-0">setup</span><br/><span class="hl-1">│</span><br/><span class="hl-1">├── </span><span class="hl-0">core</span><span class="hl-1">/                         # </span><span class="hl-0">Compiler</span><span class="hl-1"> </span><span class="hl-0">Core</span><br/><span class="hl-1">│   ├── </span><span class="hl-0">parser</span><span class="hl-1">/</span><br/><span class="hl-1">│   │   └── </span><span class="hl-0">openapi</span><span class="hl-1">.</span><span class="hl-0">parser</span><span class="hl-1">.</span><span class="hl-0">ts</span><span class="hl-1">     # </span><span class="hl-0">Stage</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">: </span><span class="hl-0">Parse</span><span class="hl-1"> </span><span class="hl-0">OpenAPI</span><br/><span class="hl-1">│   │</span><br/><span class="hl-1">│   ├── </span><span class="hl-0">ir</span><span class="hl-1">/</span><br/><span class="hl-1">│   │   ├── </span><span class="hl-0">interfaces</span><span class="hl-1">/</span><br/><span class="hl-1">│   │   │   └── </span><span class="hl-0">models</span><span class="hl-1">.</span><span class="hl-0">ts</span><span class="hl-1">         # </span><span class="hl-3">IR</span><span class="hl-1"> </span><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-6">definitions</span><br/><span class="hl-1">│   │   ├── analyzer/</span><br/><span class="hl-1">│   │   │   ├── type.mapper.ts    # Maps OpenAPI types to IR types</span><br/><span class="hl-1">│   │   │   └── schema.merger.ts  # Merges allOf schemas</span><br/><span class="hl-1">│   │   └── openapi.converter.ts  # Stage 2: Convert to IR</span><br/><span class="hl-1">│   │</span><br/><span class="hl-1">│   └── generator/</span><br/><span class="hl-1">│       ├── engine.ts             # Stage 3: Orchestrator</span><br/><span class="hl-1">│       ├── writers/</span><br/><span class="hl-1">│       │   ├── dto.writer.ts     # Emit DTOs and Enums</span><br/><span class="hl-1">│       │   ├── service.writer.ts # Emit NestJS Services</span><br/><span class="hl-1">│       │   ├── module.writer.ts  # Emit NestJS Module</span><br/><span class="hl-1">│       │   └── index.writer.ts   # Emit barrel exports</span><br/><span class="hl-1">│       └── helpers/</span><br/><span class="hl-1">│           ├── type.helper.ts    # Type conversion utilities</span><br/><span class="hl-1">│           ├── import.helper.ts  # Import statement generation</span><br/><span class="hl-1">│           ├── decorator.helper.ts # Decorator application</span><br/><span class="hl-1">│           └── file-header.helper.ts # Generated file headers</span><br/><span class="hl-1">│</span><br/><span class="hl-1">└── utils/</span><br/><span class="hl-1">    ├── logger.ts                 # Logging utilities</span><br/><span class="hl-1">    ├── naming.ts                 # Case conversion (camelCase, PascalCase, etc.)</span><br/><span class="hl-1">    └── index.ts                  # Public exports</span><br/><br/><span class="hl-1">test/</span><br/><span class="hl-1">├── e2e/</span><br/><span class="hl-1">│   └── generator.e2e-spec.ts     # End-to-end test suite</span><br/><span class="hl-1">├── fixtures/</span><br/><span class="hl-1">│   ├── petstore.json             # Standard test spec</span><br/><span class="hl-1">│   ├── cyclos.json               # Real-world complex spec</span><br/><span class="hl-1">│   └── complex.json              # Edge case spec</span><br/><span class="hl-1">└── units/</span><br/><span class="hl-1">    ├── parser/                   # Parser unit tests</span><br/><span class="hl-1">    ├── ir/                       # IR conversion tests</span><br/><span class="hl-1">    └── generator/                # Writer unit tests</span>
</code><button>Copy</button></pre>

<h2 id="development-patterns" class="tsd-anchor-link">Development Patterns<a href="#development-patterns" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="clean-architecture-principles" class="tsd-anchor-link">Clean Architecture Principles<a href="#clean-architecture-principles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Dependency Injection</strong>: Writers receive dependencies through constructors, never instantiate them.</li>
<li><strong>Interface Segregation</strong>: Each layer exposes minimal public APIs.</li>
<li><strong>Immutability</strong>: The IR is treated as immutable once generated. Generators do not modify it.</li>
</ol>
<h3 id="adding-a-new-feature" class="tsd-anchor-link">Adding a New Feature<a href="#adding-a-new-feature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Scenario: Support a new validation rule (e.g., <code>@Pattern(regex)</code>)</strong></p>
<ol>
<li><strong>Update IR:</strong> Add <code>'PATTERN'</code> to the <code>IrValidator</code> union type in <code>src/core/ir/interfaces/models.ts</code>.</li>
<li><strong>Update Analyzer:</strong> In <code>src/core/ir/analyzer/type.mapper.ts</code>, extract the <code>pattern</code> field from OpenAPI schemas and add a <code>PATTERN</code> validator.</li>
<li><strong>Update Generator:</strong> In <code>src/core/generator/writers/dto.writer.ts</code>, read the <code>PATTERN</code> validator and apply the <code>@Matches()</code> decorator using <code>ts-morph</code>.</li>
</ol>
<h3 id="testing-strategy" class="tsd-anchor-link">Testing Strategy<a href="#testing-strategy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Unit Tests</strong>: Test individual components (<code>TypeMapper</code>, <code>DtoWriter</code>) in isolation using mocks.</li>
<li><strong>Integration Tests</strong>: Test full conversion pipeline (<code>OpenApiParser</code> → <code>OpenApiConverter</code>).</li>
<li><strong>E2E Tests</strong>: Run CLI against fixture specs and validate generated AST structure (no compilation required).</li>
</ul>
<p><strong>Test Coverage Requirement:</strong> Greater than 90% line coverage across all layers.</p>
<h3 id="code-standards" class="tsd-anchor-link">Code Standards<a href="#code-standards" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Strict TypeScript</strong>: <code>strict: true</code> in <code>tsconfig.json</code>. No <code>any</code> types without justification.</li>
<li><strong>Logging</strong>: Use <code>src/utils/logger</code> instead of <code>console.log()</code>.</li>
<li><strong>Error Handling</strong>: Use custom Exceptions or log errors via Logger. No empty <code>catch</code> blocks.</li>
<li><strong>No Debug Code</strong>: No commented-out code, no <code>TODO</code> notes without context, no debug <code>console.log()</code>.</li>
<li><strong>Documentation</strong>: JSDoc comments for exported classes, methods, and interfaces. Explain <em>why</em>, not <em>what</em>.</li>
</ul>
<h2 id="further-reading" class="tsd-anchor-link">Further Reading<a href="#further-reading" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://spec.openapis.org/oas/v3.0.3">OpenAPI 3.0 Specification</a></li>
<li><a href="https://docs.nestjs.com/">NestJS Documentation</a></li>
<li><a href="https://ts-morph.readthedocs.io/">ts-morph Documentation</a></li>
<li><a href="https://github.com/typestack/class-validator">class-validator Documentation</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#nog-cli-architecture-and-design-guide"><span>Nog-<wbr/>CLI <wbr/>Architecture and <wbr/>Design <wbr/>Guide</span></a><ul><li><a href="#table-of-contents"><span>Table of <wbr/>Contents</span></a></li><li><a href="#high-level-architecture"><span>High-<wbr/>Level <wbr/>Architecture</span></a></li><li><a href="#data-flow-pipeline"><span>Data <wbr/>Flow <wbr/>Pipeline</span></a></li><li><ul><li><a href="#stage-1-parser"><span>Stage 1: <wbr/>Parser</span></a></li><li><a href="#stage-2-internal-representation-ir"><span>Stage 2: <wbr/>Internal <wbr/>Representation (<wbr/>IR)</span></a></li><li><ul><li><a href="#ir-structures"><span>IR <wbr/>Structures</span></a></li><li><a href="#two-pass-conversion-algorithm"><span>Two-<wbr/>Pass <wbr/>Conversion <wbr/>Algorithm</span></a></li></ul></li><li><a href="#stage-3-generator"><span>Stage 3: <wbr/>Generator</span></a></li><li><ul><li><a href="#writer-classes"><span>Writer <wbr/>Classes</span></a></li></ul></li></ul></li><li><a href="#core-concepts"><span>Core <wbr/>Concepts</span></a></li><li><ul><li><a href="#pure-oneof-vs-hybrid-oneof"><span>Pure <wbr/>One<wbr/>Of vs. <wbr/>Hybrid <wbr/>One<wbr/>Of</span></a></li><li><ul><li><a href="#pure-oneof-type-alias"><span>Pure <wbr/>One<wbr/>Of (<wbr/>Type <wbr/>Alias)</span></a></li><li><a href="#hybrid-oneof-class"><span>Hybrid <wbr/>One<wbr/>Of (<wbr/>Class)</span></a></li></ul></li><li><a href="#dual-service-methods"><span>Dual <wbr/>Service <wbr/>Methods</span></a></li><li><ul><li><a href="#observable-method-suffix-"><span>Observable <wbr/>Method (<wbr/>Suffix )</span></a></li><li><a href="#promise-method"><span>Promise <wbr/>Method</span></a></li></ul></li><li><a href="#validation-decorators"><span>Validation <wbr/>Decorators</span></a></li></ul></li><li><a href="#design-decisions"><span>Design <wbr/>Decisions</span></a></li><li><ul><li><a href="#why-ts-morph-for-code-generation"><span>Why ts-<wbr/>morph for <wbr/>Code <wbr/>Generation?</span></a></li><li><a href="#why-two-pass-circular-dependency-resolution"><span>Why <wbr/>Two-<wbr/>Pass <wbr/>Circular <wbr/>Dependency <wbr/>Resolution?</span></a></li><li><a href="#why-separate-parser-ir-and-generator"><span>Why <wbr/>Separate <wbr/>Parser, <wbr/>IR, and <wbr/>Generator?</span></a></li></ul></li><li><a href="#directory-structure"><span>Directory <wbr/>Structure</span></a></li><li><a href="#development-patterns"><span>Development <wbr/>Patterns</span></a></li><li><ul><li><a href="#clean-architecture-principles"><span>Clean <wbr/>Architecture <wbr/>Principles</span></a></li><li><a href="#adding-a-new-feature"><span>Adding a <wbr/>New <wbr/>Feature</span></a></li><li><a href="#testing-strategy"><span>Testing <wbr/>Strategy</span></a></li><li><a href="#code-standards"><span>Code <wbr/>Standards</span></a></li></ul></li><li><a href="#further-reading"><span>Further <wbr/>Reading</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">Nog CLI Developer Guide - v0.9.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
